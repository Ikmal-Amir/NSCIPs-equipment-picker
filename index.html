<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Equipment Search</title>
<style>
  body {
    font-family: Arial, sans-serif;
    padding: 20px;
  }
  #search {
    width: 100%;
    padding: 8px;
    font-size: 14px;
    margin-bottom: 10px;
  }
  table {
    border-collapse: collapse;
    width: 100%;
    font-size: 14px;
  }
  th, td {
    border: 1px solid #ddd;
    padding: 6px;
    text-align: left;
  }
  tr:hover {
    background-color: #f1f1f1;
  }
  .clickable {
    color: #0066cc;
    cursor: pointer;
    text-decoration: underline;
  }
</style>
<script src="https://cdn.jsdelivr.net/npm/papaparse@5.4.1/papaparse.min.js"></script>
</head>
<body>

<h2>Equipment Search</h2>
<input type="text" id="search" placeholder="Search equipment number or description...">
<table id="equipmentTable">
  <thead>
    <tr>
      <th>Equipment No.</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody></tbody>
</table>

<script>
const csvUrl = "https://github.com/Ikmal-Amir/NSCIPs-equipment-picker/blob/f18adfda435b906047f8362296dda634912578a8/equipment.csv"; // Replace with your GitHub CSV raw link

let equipmentData = [];

function loadCSV() {
  Papa.parse(csvUrl, {
    download: true,
    header: true, // Change to true if CSV has column names
    skipEmptyLines: true,
    complete: function(results) {
      equipmentData = results.data;
      renderTable(equipmentData);
    }
  });
}

function renderTable(data) {
  const tbody = document.querySelector("#equipmentTable tbody");
  tbody.innerHTML = "";
  data.forEach(row => {
    const tr = document.createElement("tr");

    const tdNo = document.createElement("td");
    tdNo.textContent = row["Equipment No."];
    tdNo.classList.add("clickable");
    tdNo.onclick = () => copyToClipboard(row["Equipment No."]);

    const tdDesc = document.createElement("td");
    tdDesc.textContent = row["Description"];

    tr.appendChild(tdNo);
    tr.appendChild(tdDesc);
    tbody.appendChild(tr);
  });
}

function copyToClipboard(text) {
  navigator.clipboard.writeText(text).then(() => {
    alert(`Copied: ${text}`);
  });
}

document.getElementById("search").addEventListener("input", function() {
  const searchTerm = this.value.toLowerCase();
  const filtered = equipmentData.filter(row => 
    row[0].toLowerCase().includes(searchTerm) || 
    row[1].toLowerCase().includes(searchTerm)
  );
  renderTable(filtered);
});

loadCSV();
</script>

</body>
</html>

